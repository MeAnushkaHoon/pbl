<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Upload App — Submit Your App</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--muted:#98a0b3;--accent:#6ee7b7;--glass:rgba(255,255,255,0.04)}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,"Helvetica Neue",Arial; margin:0; min-height:100vh; background:linear-gradient(180deg,#071023 0%, #071a2b 100%); color:#e6eef8; display:flex; align-items:center; justify-content:center; padding:32px}
    .container{width:100%;max-width:980px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:12px; padding:22px; box-shadow:0 6px 30px rgba(2,6,23,0.6);}
    .grid{display:grid; grid-template-columns: 1fr 380px; gap:18px}
    h1{margin:0 0 6px 0; font-size:20px}
    p.lead{margin:0 0 16px 0; color:var(--muted); font-size:13px}
    label{display:block; font-size:13px; margin-bottom:6px; color:#cfe7db}
    input[type=text], input[type=url], input[type=number], textarea{width:100%; padding:10px 12px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:var(--card); color:inherit; font-size:14px}
    textarea{min-height:110px; resize:vertical}
    .field{margin-bottom:12px}
    .photos{border:2px dashed rgba(255,255,255,0.04); padding:12px; border-radius:10px; background:var(--glass); cursor:pointer; text-align:center}
    .photos input{display:none}
    .thumbs{display:flex; gap:8px; margin-top:10px; flex-wrap:wrap}
    .thumb{width:76px; height:76px; border-radius:8px; overflow:hidden; background:#08121a; display:flex; align-items:center; justify-content:center; position:relative}
    .thumb img{width:100%; height:100%; object-fit:cover}
    .thumb .remove{position:absolute; top:4px; right:4px; background:rgba(0,0,0,0.5); border-radius:50%; width:22px; height:22px; display:flex; align-items:center; justify-content:center; font-size:12px; cursor:pointer}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--accent),#34d399); color:#042018;font-weight:600; cursor:pointer}
    .muted{color:var(--muted); font-size:13px}
    .preview{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:14px; border-radius:10px}
    .app-card{display:flex; gap:12px}
    .app-card .left{width:84px; height:84px; border-radius:12px; overflow:hidden; background:#07121a}
    .app-card .left img{width:100%; height:100%; object-fit:cover}
    .app-card .meta{flex:1}
    .meta h3{margin:0 0 6px 0}
    .meta p{margin:0; color:var(--muted); font-size:13px}
    .small{font-size:12px; color:var(--muted)}
    .row{display:flex; gap:8px; align-items:center}
    .note{margin-top:8px; font-size:13px; color:var(--muted)}
    @media (max-width:900px){.grid{grid-template-columns:1fr;}.container{padding:16px}}
  </style>
</head>
<body>
  <div class="container">
    <div class="grid">
      <div>
        <h1>Upload App</h1>
        <p class="lead">Fill the form to submit your app. This is a static frontend demo — you can wire the form to your backend or GitHub Actions later.</p>

        <form id="uploadForm">
          <div class="field">
            <label for="title">App Title</label>
            <input id="title" name="title" type="text" placeholder="e.g. StudyBuddy" required />
          </div>

          <div class="field">
            <label for="description">Description</label>
            <textarea id="description" name="description" placeholder="Short description (what it does, main features)" required></textarea>
          </div>

          <div class="field">
            <label>Photos (screenshots / icon)</label>
            <div class="photos" id="dropArea">Click or drag & drop images here<br><small class="muted">JPG, PNG — up to 5 images</small>
              <input id="photosInput" type="file" accept="image/*" multiple />
              <div class="thumbs" id="thumbs"></div>
            </div>
          </div>

          <div class="field">
            <label for="github">GitHub URL</label>
            <input id="github" type="url" placeholder="https://github.com/username/repo" />
          </div>

          <div class="field row">
            <div style="flex:1">
              <label for="apk">APK Download URL</label>
              <input id="apk" type="url" placeholder="https://example.com/app.apk" />
            </div>
            <div style="width:120px">
              <label for="version">Version</label>
              <input id="version" type="text" placeholder="1.0.0" />
            </div>
            <div style="width:110px">
              <label for="size">Size (MB)</label>
              <input id="size" type="number" step="0.01" placeholder="12.4" />
            </div>
          </div>

          <div class="field">
            <button class="btn" type="submit">Preview & Submit</button>
            <button id="resetBtn" type="button" class="btn" style="background:transparent;color:var(--accent);border:1px solid rgba(255,255,255,0.04);margin-left:8px">Reset</button>
          </div>

          <p class="note">This demo does client-side validation and shows a preview. For production, upload images to a storage bucket and submit form data to your server.</p>
        </form>
      </div>

      <aside>
        <h1 style="font-size:16px;margin-bottom:8px">Live Preview</h1>
        <div class="preview" id="previewBox">
          <div class="app-card" id="appCard">
            <div class="left" id="appLeft"><img src="" alt="icon" /></div>
            <div class="meta">
              <h3 id="pTitle">App title</h3>
              <p id="pDesc" class="small">Description will appear here</p>
              <p class="small" style="margin-top:8px"><strong>Version:</strong> <span id="pVersion">—</span> &nbsp; <strong>Size:</strong> <span id="pSize">—</span> MB</p>
              <p style="margin-top:8px"><a id="pGithub" href="#" target="_blank" class="small">GitHub</a> • <a id="pApk" href="#" target="_blank" class="small">APK</a></p>
            </div>
          </div>

          <div style="margin-top:12px">
            <strong>Screenshots</strong>
            <div class="thumbs" id="previewThumbs"></div>
          </div>

          <div style="margin-top:12px;display:flex;gap:8px;align-items:center">
            <button id="downloadJson" class="btn" style="padding:8px 10px">Download JSON</button>
            <div id="status" class="muted">No submission yet</div>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <script>
    const photosInput = document.getElementById('photosInput');
    const dropArea = document.getElementById('dropArea');
    const thumbs = document.getElementById('thumbs');
    const previewThumbs = document.getElementById('previewThumbs');
    const appLeftImg = document.querySelector('#appLeft img');

    let files = [];

    dropArea.addEventListener('click', () => photosInput.click());
    dropArea.addEventListener('dragover', (e) => { e.preventDefault(); dropArea.style.borderColor = '#34d399'; });
    dropArea.addEventListener('dragleave', () => { dropArea.style.borderColor='rgba(255,255,255,0.04)'; });
    dropArea.addEventListener('drop', (e) => { e.preventDefault(); dropArea.style.borderColor='rgba(255,255,255,0.04)'; handleFiles(e.dataTransfer.files); });

    photosInput.addEventListener('change', (e) => handleFiles(e.target.files));

    function handleFiles(list){
      const incoming = Array.from(list).slice(0,5-files.length); // limit 5
      incoming.forEach(file => {
        if(!file.type.startsWith('image/')) return;
        files.push(file);
      });
      renderThumbs();
      renderPreviewThumbs();
    }

    function renderThumbs(){
      thumbs.innerHTML='';
      files.forEach((file, idx) => {
        const url = URL.createObjectURL(file);
        const el = document.createElement('div'); el.className='thumb';
        el.innerHTML = `<img src="${url}" alt="screenshot"><div class="remove" data-idx="${idx}">✕</div>`;
        thumbs.appendChild(el);
      });
    }

    thumbs.addEventListener('click', (e)=>{
      const rem = e.target.closest('.remove');
      if(!rem) return;
      const idx = Number(rem.dataset.idx);
      files.splice(idx,1);
      renderThumbs(); renderPreviewThumbs();
    });

    function renderPreviewThumbs(){
      previewThumbs.innerHTML='';
      previewThumbs.style.minHeight = '34px';
      files.forEach((file, idx) => {
        const url = URL.createObjectURL(file);
        const el = document.createElement('div'); el.className='thumb';
        el.innerHTML = `<img src="${url}" alt="screenshot">`;
        previewThumbs.appendChild(el);
      });
      // set first image as icon
      if(files.length>0){ appLeftImg.src = URL.createObjectURL(files[0]); }
      else { appLeftImg.src = ''; }
    }

    // form bindings
    const uploadForm = document.getElementById('uploadForm');
    const pTitle = document.getElementById('pTitle');
    const pDesc = document.getElementById('pDesc');
    const pVersion = document.getElementById('pVersion');
    const pSize = document.getElementById('pSize');
    const pGithub = document.getElementById('pGithub');
    const pApk = document.getElementById('pApk');
    const status = document.getElementById('status');
    const downloadJson = document.getElementById('downloadJson');

    const inputs = ['title','description','version','size','github','apk'].reduce((acc,id)=>{acc[id]=document.getElementById(id);return acc},{})

    // live update
    Object.values(inputs).forEach(inp => inp && inp.addEventListener('input', updatePreview));

    function updatePreview(){
      pTitle.textContent = inputs.title.value || 'App title';
      pDesc.textContent = inputs.description.value || 'Description will appear here';
      pVersion.textContent = inputs.version.value || '—';
      pSize.textContent = inputs.size.value || '—';
      pGithub.href = inputs.github.value || '#'; pGithub.textContent = inputs.github.value ? 'GitHub' : 'GitHub';
      pApk.href = inputs.apk.value || '#'; pApk.textContent = inputs.apk.value ? 'Download APK' : 'APK';
    }

    uploadForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      // basic validation
      if(!inputs.title.value.trim() || !inputs.description.value.trim()){ alert('Please enter title and description'); return; }
      // create data object
      const data = {
        title: inputs.title.value.trim(),
        description: inputs.description.value.trim(),
        github: inputs.github.value.trim() || null,
        apk: inputs.apk.value.trim() || null,
        version: inputs.version.value.trim() || null,
        size_mb: inputs.size.value ? Number(inputs.size.value) : null,
        screenshots: files.map((f,i)=>({name:f.name,size:f.size,type:f.type}))
      };

      status.textContent = 'Prepared preview — ready to submit.';
      // make JSON downloadable
      const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'});
      downloadJson.href = URL.createObjectURL(blob);
      downloadJson.download = (inputs.title.value || 'app') + '_metadata.json';
      // show success animation briefly
      status.style.color = '#6ee7b7';
      setTimeout(()=>{ status.style.color = ''; }, 2400);
    });

    document.getElementById('resetBtn').addEventListener('click', ()=>{
      uploadForm.reset(); files=[]; renderThumbs(); renderPreviewThumbs(); updatePreview(); document.getElementById('status').textContent='Reset';
    });

    // init
    updatePreview();
  </script>
</body>
</html>
